{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lelic\\\\Desktop\\\\Zavrsniprojekat\\\\frontend\\\\src\\\\BookHotelContext.js\",\n    _s = $RefreshSig$();\n\nimport { format } from \"date-fns\";\nimport { createContext, useContext, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport AuthContext from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookHotelContext = /*#__PURE__*/createContext();\nexport default BookHotelContext;\nexport const BookHotelProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  let [checkin, setCheckin] = useState(new Date());\n  let [checkout, setCheckout] = useState(new Date());\n  let url = window.location.href;\n  let {\n    user\n  } = useContext(AuthContext);\n  let params = url.substring(url.length - 1);\n  console.log(parseInt(params));\n\n  const bookHotelDate = async () => {\n    const api = await fetch('/api/reserv/', {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"checkin\": format(checkin, 'yyyy-MM-dd'),\n        \"checkout\": format(checkout, 'yyyy-MM-dd'),\n        \"current_user\": user.user_id,\n        \"current_hotel\": parseInt(params)\n      })\n    });\n\n    if (api.status === 200) {\n      alert('Uspjesno ste bookirali datum');\n    } else {\n      alert();\n    }\n  }; //        \"checkin\": \"2022-08-04\",\n  // \"checkout\": \"2022-08-09\",\n  //  \"current_user\": 21,\n  //\"current_hotel\": 2\n\n\n  let bookingData = {\n    checkin: checkin,\n    setCheckin: setCheckin,\n    checkout: checkout,\n    setCheckout: setCheckout,\n    bookHotelDate: bookHotelDate\n  };\n  return /*#__PURE__*/_jsxDEV(BookHotelContext.Provider, {\n    value: bookingData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BookHotelProvider, \"lpRuXKbH21Xw8pJUZNg8jxpo3BU=\");\n\n_c = BookHotelProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookHotelProvider\");","map":{"version":3,"names":["format","createContext","useContext","useState","useParams","AuthContext","BookHotelContext","BookHotelProvider","children","checkin","setCheckin","Date","checkout","setCheckout","url","window","location","href","user","params","substring","length","console","log","parseInt","bookHotelDate","api","fetch","headers","body","JSON","stringify","user_id","status","alert","bookingData"],"sources":["C:/Users/lelic/Desktop/Zavrsniprojekat/frontend/src/BookHotelContext.js"],"sourcesContent":["import { format } from \"date-fns\";\r\nimport { createContext, useContext, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport AuthContext from \"./AuthContext\";\r\nconst BookHotelContext = createContext();\r\nexport default BookHotelContext;\r\nexport const BookHotelProvider = ({children}) => {\r\n    let [checkin, setCheckin] = useState(new Date());\r\n    let [checkout, setCheckout] = useState(new Date());\r\n    let url = window.location.href\r\n    let { user } =  useContext(AuthContext)\r\n    let params = url.substring(url.length - 1)\r\n    console.log(parseInt(params))\r\n    const bookHotelDate = async() => {\r\n        const api = await fetch('/api/reserv/',{\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body:JSON.stringify({\"checkin\":format(checkin, 'yyyy-MM-dd'),\"checkout\":format(checkout, 'yyyy-MM-dd'),\"current_user\": user.user_id,\"current_hotel\": parseInt(params)})\r\n        })\r\n        if (api.status === 200){\r\n            alert('Uspjesno ste bookirali datum')\r\n        }\r\n        else {\r\n            alert()\r\n        }\r\n    }\r\n    //        \"checkin\": \"2022-08-04\",\r\n    // \"checkout\": \"2022-08-09\",\r\n  //  \"current_user\": 21,\r\n    //\"current_hotel\": 2\r\n    let bookingData = {\r\n        checkin:checkin,\r\n        setCheckin:setCheckin,\r\n        checkout:checkout,\r\n        setCheckout:setCheckout,\r\n        bookHotelDate:bookHotelDate\r\n             \r\n    }\r\n  \r\n    return (\r\n        <BookHotelContext.Provider value={bookingData}>\r\n              { children }\r\n        </BookHotelContext.Provider>\r\n        \r\n        )\r\n}\r\n"],"mappings":";;;AAAA,SAASA,MAAT,QAAuB,UAAvB;AACA,SAASC,aAAT,EAAwBC,UAAxB,EAAoCC,QAApC,QAAoD,OAApD;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AACA,MAAMC,gBAAgB,gBAAGL,aAAa,EAAtC;AACA,eAAeK,gBAAf;AACA,OAAO,MAAMC,iBAAiB,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAC7C,IAAI,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAIQ,IAAJ,EAAD,CAApC;EACA,IAAI,CAACC,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,IAAIQ,IAAJ,EAAD,CAAtC;EACA,IAAIG,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA1B;EACA,IAAI;IAAEC;EAAF,IAAYhB,UAAU,CAACG,WAAD,CAA1B;EACA,IAAIc,MAAM,GAAGL,GAAG,CAACM,SAAJ,CAAcN,GAAG,CAACO,MAAJ,GAAa,CAA3B,CAAb;EACAC,OAAO,CAACC,GAAR,CAAYC,QAAQ,CAACL,MAAD,CAApB;;EACA,MAAMM,aAAa,GAAG,YAAW;IAC7B,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,cAAD,EAAgB;MACnCC,OAAO,EAAE;QACL,UAAU,kBADL;QAEL,gBAAgB;MAFX,CAD0B;MAKnCC,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;QAAC,WAAU/B,MAAM,CAACS,OAAD,EAAU,YAAV,CAAjB;QAAyC,YAAWT,MAAM,CAACY,QAAD,EAAW,YAAX,CAA1D;QAAmF,gBAAgBM,IAAI,CAACc,OAAxG;QAAgH,iBAAiBR,QAAQ,CAACL,MAAD;MAAzI,CAAf;IAL8B,CAAhB,CAAvB;;IAOA,IAAIO,GAAG,CAACO,MAAJ,KAAe,GAAnB,EAAuB;MACnBC,KAAK,CAAC,8BAAD,CAAL;IACH,CAFD,MAGK;MACDA,KAAK;IACR;EACJ,CAdD,CAP6C,CAsB7C;EACA;EACF;EACE;;;EACA,IAAIC,WAAW,GAAG;IACd1B,OAAO,EAACA,OADM;IAEdC,UAAU,EAACA,UAFG;IAGdE,QAAQ,EAACA,QAHK;IAIdC,WAAW,EAACA,WAJE;IAKdY,aAAa,EAACA;EALA,CAAlB;EASA,oBACI,QAAC,gBAAD,CAAkB,QAAlB;IAA2B,KAAK,EAAEU,WAAlC;IAAA,UACQ3B;EADR;IAAA;IAAA;IAAA;EAAA,QADJ;AAMH,CAzCM;;GAAMD,iB;;KAAAA,iB"},"metadata":{},"sourceType":"module"}